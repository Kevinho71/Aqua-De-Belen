<script>
  const bs = v => `Bs ${Number(v||0).toFixed(2)}`;
  async function cargarProductos() {
    const res = await fetch('/api/productos');
    const productos = await res.json();
    const tbody = document.getElementById('tabla-productos-body');
    tbody.innerHTML = '';
    productos.forEach(p => {
      const estado = p.stock <= 4 ? 'Stock CrÃ­tico' : (p.stock <= 8 ? 'Stock Bajo' : 'En Stock');
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${p.nombre}</td>
        <td>${p.marca ?? '-'}</td>
        <td>${p.categoria ?? '-'}</td>
        <td>${bs(p.precio)}</td>
        <td>${p.stock}</td>
        <td><span class="badge ${estado.replace(' ','-').toLowerCase()}">${estado}</span></td>`;
      tbody.appendChild(tr);
    });
  }
  cargarProductos();
</script>
